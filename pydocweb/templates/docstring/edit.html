{% extends "docstring/base.html" %}
{% load docstring %}

{% block content %}

{% if conflict_warning %}
<div id='merge-warning'>
  <p><b>This file has conflicts with the version in SVN.
      Correct the docstring between all conflict markers
      (<tt>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</tt> and 
      <tt>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</tt>).
  </b></p>
</div>
{% endif %}
{% if merge_warning %}
<div id='merge-warning'>
  <p>This file was previously automatically merged with SVN.</p>
</div>
{% endif %}

<p>Edit:</p>

<form action="{% url pydocweb.doc.views.edit_docstring name=name %}" method="post">
  <ul>
    {{ form.as_ul }}
    <li><label></label>
      <input type="submit" name="button_edit" value="Save" />
      <input type="submit" name="button_preview" value="Preview" />
      <input type="submit" name="button_cancel" value="Cancel" /></li>
  </ul>
</form>

{% if help_html %}
<div id='help'>{{help_html}}</div>
{% endif %}

{% if preview_html %}
<h2>Changes</h2>
<div id='merge-info'>
  <pre>{{diff_html}}</pre>
</div>
<h2>Preview</h2>
<div id='preview'>
  <div id='document'>
    {% if bases %}
    <p>
      Derived from: {% for base in bases %}
      {% docstring_name_link base %}{% if forloop.last %}{% else %}, {% endif %}
      {% endfor %}
    </p>
    {% endif %}
    {% if argspec %}
    <p>{{basename|escape}}{{argspec|escape}}</p>
    {% endif %}
    {{preview_html}}
  </div>
</div>
{% endif %}

{% endblock %}
