{% extends "base.html" %}

{% block title %}
{{name}}
{% endblock %}

{% block content %}
<h1>{{name}}</h1>

{% if revision %}
<div id="revision-header">
  Revision {{revision.revno}}.
  <a href="{% url pydocweb.doc.views.docstring name %}">Back to current revision.</a>
  <a href="{% url pydocweb.doc.views.log name %}">Back to log.</a>
</div>
{% else %}
<div id="review-status">
  <form action="{% url pydocweb.doc.views.review name %}" method="post">
    <ul>
      {{review_form.as_ul}}
      <li><input type="submit" value="Change" /></li>
    </ul>
  </form>
</div>
{% endif %}

<div id="docstring">
  {{body}}
</div>

{% if not revision %}
<a href="{% url pydocweb.doc.views.edit name %}">Edit</a>
<a href="{% url pydocweb.doc.views.log name %}">Log</a>
<a href="{% url pydocweb.doc.views.diff name,"svn","cur" %}">Diff to SVN</a>
{% endif %}

{% block discussion %}
<div id="comments">
  <h1>Discussion</h1>
  {% for comment in comments %}
  <div class="comment">
    <div class="author">{{comment.author}}</div>
    <div class="text">{{comment.text}}</div>
    <div class="editlabel"><a href="{% url pydocweb.doc.views.comment_edit name,comment.id %}">Edit</a></div>
  </div>
  {% endfor %}
  <div class="editlabel"><a href="{% url pydocweb.doc.views.comment_new name %}">New comment</a></div>
</div>
{% endblock %}


{% block docstring_contents %}

{% ifequal doc.type_ "module" %}
<div id="contents">
  <h1>Modules</h1>
  <ul class="content-list">
    {% for alias in doc.child_modules %}
    <li><a href="{% url pydocweb.doc.views.docstring alias.target %}">{{alias.alias}}</a></li>
    {% endfor %}
  </ul>

  <h1>Classes</h1>
  <ul class="content-list">
    {% for alias in doc.child_classes %}
    <li><a href="{% url pydocweb.doc.views.docstring alias.target %}">{{alias.alias}}</a></li>
    {% endfor %}
  </ul>

  <h1>Functions</h1>
  <ul class="content-list">
    {% for alias in doc.child_callables %}
    <li><a href="{% url pydocweb.doc.views.docstring alias.target %}">{{alias.alias}}</a></li>
    {% endfor %}
  </ul>

  <h1>Objects</h1>
  <ul class="content-list">
    {% for alias in doc.child_objects %}
    <li><a href="{% url pydocweb.doc.views.docstring alias.target %}">{{alias.alias}}</a></li>
    {% endfor %}
  </ul>
</div>
{% endifequal %}

{% ifequal doc.type_ "class" %}
<div id="contents">
  <h1>Methods</h1>
  <ul class="content-list">
    {% for alias in doc.child_callables %}
    <li><a href="{% url pydocweb.doc.views.docstring alias.target %}">{{alias.alias}}</a></li>
    {% endfor %}
  </ul>

  <h1>Properties</h1>
  <ul class="content-list">
    {% for alias in doc.child_objects %}
    <li><a href="{% url pydocweb.doc.views.docstring alias.target %}">{{alias.alias}}</a></li>
    {% endfor %}
  </ul>
</div>
{% endifequal %}

{% endblock %}

{% endblock %}
